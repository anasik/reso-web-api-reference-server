/*
 * This file was generated by the Gradle 'init' task.
 */
plugins {
    id 'java-library' // For creating reusable libraries
    id 'war'
}

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(8)
    }
}

repositories {
    // Use Gradle-compatible repositories (e.g., Maven Central)
    mavenCentral()
}

dependencies {
    // Core dependencies
    api 'org.apache.olingo:odata-server-api:4.9.0'
    api 'org.apache.olingo:odata-commons-api:4.9.0'
    api 'org.apache.olingo:odata-commons-core:4.9.0'
    api 'com.fasterxml.jackson.core:jackson-databind:2.13.0'
    api 'com.fasterxml.jackson.core:jackson-annotations:2.13.0'
    api 'com.google.code.gson:gson:2.8.9'
    api 'org.slf4j:slf4j-api:1.7.32'
    api 'com.google.code.findbugs:jsr305:3.0.2' 
    // MongoDB dependencies
    api 'org.mongodb:mongodb-driver-sync:4.4.0'
    api 'org.mongodb:bson:4.4.0'

    // MySQL dependencies
    implementation 'mysql:mysql-connector-java:8.0.27'

    // Runtime dependencies
    runtimeOnly 'org.apache.olingo:odata-server-core:4.9.0'
    runtimeOnly 'org.slf4j:slf4j-simple:1.7.32'

    // Test dependencies
    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.8.1'
    testImplementation 'org.junit.jupiter:junit-jupiter-engine:5.8.1'
    testImplementation 'org.junit.jupiter:junit-jupiter:5.8.1'
    implementation 'org.apache.httpcomponents:httpclient:4.5.13'

    // Provided dependencies
    compileOnly 'javax.servlet:javax.servlet-api:4.0.1'
}

group = 'org.reso'
version = '1.0'
description = 'RESOservice'

test {
    useJUnitPlatform()
    environment "LOOKUP_TYPE", "STRING"
    environment "DB_TYPE", "mongodb"
}

tasks.test {
 useJUnitPlatform()
    // Exclude ExpandUtilsTest to run it only when needed
    exclude '**/ExpandUtilsTest.class'
}

task runExpandUtilsTest(type: Test) {
    useJUnitPlatform()
    // Run only ExpandUtilsTest
    include '**/ExpandUtilsTest.class'
}

// Ensure compatibility with Java 8
java {
    sourceCompatibility = JavaVersion.VERSION_1_8
    targetCompatibility = JavaVersion.VERSION_1_8
}

